<%= simple_form_for (@content_provider ? [@content_provider, @source] : @source), html: { class: 'source', multipart: true } do |f| %>
  <%= render partial: 'common/error_summary', locals: { resource: @source } %>

  <% unless @content_provider %>
    <%= f.input :content_provider_id,
                collection: current_user.get_editable_providers,
                label_method: :title,
                value_method: :id,
                include_blank: false %>
  <% end %>

  <%= render partial: 'common/url_checker',
             locals: { f: f, url: sources_check_exists_path, title: '' } %>


  <%= f.input :method, label: 'Ingestion Method',
              as: :grouped_select,
              group_method: :last,
              collection: grouped_ingestor_options_for_select,
              include_blank: false %>

  <%= f.input :token, label: 'Authentication Token' %>

  <div class="form-group">
    <%= f.label :enabled, :class=>"checkbox inline" %>
    <%= f.check_box :enabled %>
  </div>

  <div class="form-group actions">
    <%= f.submit (f.object.new_record? ? "Create" : "Update") + " source",
                 :class => 'btn btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                sources_path, :class => 'btn btn-default' %>
  </div>

<% end %>
