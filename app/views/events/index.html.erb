<script>
    $('.grid').masonry({
        // options...
        itemSelector: '.grid-item',
        columnWidth: 10
    });
</script>

<script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>

<!-- SIDEBAR | RESULTS -->
<div class="row">
  <% if SOLR_ENABLED %>
  <!-- SIDEBAR -->
  <div class="col-md-3">
    <%= render :partial=> "search/common/facet_sidebar", :locals=>{:resources=>@events} %>
  </div>

  <!-- RESULTS -->
  <div class="col-md-9">

    <!-- CREATE NEW BUTTON -->
    <div class="row">
      <%= link_to new_event_path, :class=>"btn btn-primary" do %>
          <i class="fa fa-plus-square"></i> Create Event
      <% end %>
    </div>


    <!-- SEARCH BAR -->
    <div class="row">
      <%= render :partial=> "search/common/search_box", :locals=>{:resource_path => events_path} %>
    </div>
    
    <!-- APPLIED FILTERS, NUMBER OF RESULTS, PAGINATION-->
    <div class="row">
      <% include_expired = @facet_params.delete('include_expired') %>
      <%= render :partial => "search/common/search_info", :locals=>{:resource=>@events}  %>
    </div>

    <div class="row">
      <% if include_expired == true %>
          <%= link_to 'Exclude past events', events_path, :class => 'include_expired' %>
      <% else %>
          <%= link_to 'Include past events', events_path(:include_expired => true), :class => 'include_expired'%>
      <% end %>
    </div>

    <div class="row">
      <%= render :partial => "search/common/sort_by", :locals=>{:resource=>@events, :extras => [['Earliest', 'early'],
                                                                                                ['Latest', 'late']]}  %>
    </div>
    <%#= render :partial=> "search/common/pagination_bar", :locals=>{:resources=>@materials} %>
    <hr>
      <% @events = @events.results %>
    <% end %>

    <%= render :partial => "tab_headings", :locals => {:selected_tab => "grid"} %>
    <!-- ACTUAL RESULTS LIST -->
    <div class="listing-container">
      <div id="grid-content" class="grid tab-content">
        <% @events.each do |event| %>
           <div class="grid-item"><%= render event %></div>
        <% end %>
      </div>
      <!-- Alternative Map view -->
      <div id="map-content" class="">
        <%= render :partial => "map_view", :locals => {:events=>@events} %>
      </div>
    </div>
  </div>
</div>
