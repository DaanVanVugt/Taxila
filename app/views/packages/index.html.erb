<script>
  $(document).ready(function(){
    reposition_tiles('masonry', 'masonry-brick');
  })
</script>

<!-- SIDEBAR | RESULTS -->
<div class="row wrapper">
  <% if SOLR_ENABLED %>

      <!-- SIDEBAR -->
      <div class="col-md-3 col-xs-3" id="sidebar">
        <%= render :partial => "packages/partials/general_package_info" %>
        <%= render :partial => "search/common/facet_sidebar", :locals => {:resources => @packages, :resource_type => 'package'} %>
      </div>
      
      <!-- RESULTS -->
      <div class="col-md-9">

        <!-- CREATE BUTTON -->
        <div class="row">
          <div class="col-md-6 col-xs-6" style="padding-left: 0px;">
            <%= link_to new_package_path, :class=>"btn btn-primary" do %>
                <i class="fa fa-plus-square"></i> Create package
            <% end %>
          </div>
        </div>

        <!-- SEARCH BAR -->
        <div class="row">
          <%= render :partial=> "search/common/search_box", :locals=>{:resource_path => packages_path} %>
        </div>


        <!-- APPLIED FILTERS AND NUMBER OF RESULTS -->
        <div class="row">
          <%= render :partial => "search/common/search_info", :locals=>{:resources=>@packages, :resource_type => 'package'}  %>
        </div>

        <div class="row">
          <div class="col-md-12">
            <%= render :partial => "search/common/search_filters", :locals => {:resources => @packages} %>
          </div>
        </div>


        <!-- PAGINATION -->
        <div class="row">
          <%= render :partial=> "search/common/pagination_bar", :locals=>{:resources=>@packages} unless (@packages.blank? or @packages.results.blank?) %>
        </div>

        <hr>
        <% @packages = @packages.results unless @packages.blank? %>
  <% end %>

  <!-- ACTUAL RESULTS LIST -->
  <% unless @packages.blank? %>
    <ul class="masonry media-grid">
      <% @packages.each do |package| %>
          <%= render package %>
      <% end %>
    </ul>
  <% end %>
  </div>
</div>
