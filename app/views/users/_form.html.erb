<div class="row">
  <div class="col-md-6">
    <%= simple_form_for @user, :html => {:class => "form-horizontal profile"} do |user_f| %>
        <%= user_f.fields_for :profile do |f| %>
            <% if @user.profile.errors.any? %>
                <div id="error_expl" class="panel panel-danger">
                  <div class="panel-heading">
                    <h3 class="panel-title"><%= pluralize(@user.profile.errors.count, "error") %> prohibited this
                      profile from being saved:</h3>
                  </div>
                  <div class="panel-body">
                    <ul>
                      <% @user.profile.errors.full_messages.each do |msg| %>
                          <li><%= msg %></li>
                      <% end %>
                    </ul>
                  </div>
                </div>
            <% end %>

            <div class="form-group">
              <%= f.label :firstname, :class => 'control-label' %>
              <div class="controls">
                <%= f.text_field :firstname, :class => 'form-control', :value => @user.profile.firstname %>
              </div>
              <%#= error_span(@profile[:firstname]) %>
            </div>

            <div class="form-group">
              <%= f.label :surname, :class => 'control-label' %>
              <div class="controls">
                <%= f.text_field :surname, :class => 'form-control', :value => @user.profile.surname %>
              </div>
              <%#= error_span(@profile[:surname]) %>
            </div>

            <div class="form-group">
              <%= f.label 'Public email address', :class => 'control-label' %>
              <div class="controls">
                <%= f.text_field :email, :class => 'form-control', :value => @user.profile.email %>
              </div>
              <%#= error_span(@profile[:email]) %>
            </div>

            <div class="form-group">
              <%= f.label :website, :class => 'control-label' %>
              <div class="controls">
                <%= f.text_field :website, :class => 'form-control', :value => @user.profile.website  %>
              </div>
              <%#= error_span(@profile[:website]) %>
            </div>

        <% end %>

        <% if policy(@user).change_role? %>
            <div class="form-group">
              <%= user_f.label :role_id, 'Role', :class => 'control-label' %>
              <div class="controls">
                <%= user_f.select :role_id, Role.all.map { |p| [p.title, p.id] }, {}, :class => 'form-control'  %>
              </div>
              <%#= error_span(@profile[:website]) %>
            </div>
        <% end %>

        <div class="form-group">
          <%= user_f.submit 'Update profile', :class => 'btn btn-primary' %>
          <%= link_to 'Back', :back, :class=>"btn btn-info" %>
          <%= link_to t('.cancel', :default => t("helpers.links.cancel")), user_path(@user), :class => 'btn btn-default' %>
        </div>
    <% end -%>
  </div>
</div>
